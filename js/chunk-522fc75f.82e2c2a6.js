(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-522fc75f"],{"578a":function(e,t,n){"use strict";n.r(t);var o=n("7a23"),r=function(e){return Object(o["pushScopeId"])("data-v-04441f2c"),e=e(),Object(o["popScopeId"])(),e},a={class:"p-mx-auto p-mt-5 p-p-4 wrap"},i={class:"p-fluid"},c={class:"p-field"},s=r((function(){return Object(o["createElementVNode"])("label",{for:"email"},"Email",-1)})),u={class:"p-field"},d=r((function(){return Object(o["createElementVNode"])("label",{for:"password"},"密碼",-1)}));function l(e,t,n,r,l,p){var m=Object(o["resolveComponent"])("InputText"),f=Object(o["resolveComponent"])("Button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",a,[Object(o["createElementVNode"])("div",i,[Object(o["createElementVNode"])("div",c,[s,Object(o["createVNode"])(m,{id:"email",type:"text",modelValue:l.login_data.email,"onUpdate:modelValue":t[0]||(t[0]=function(e){return l.login_data.email=e})},null,8,["modelValue"])]),Object(o["createElementVNode"])("div",u,[d,Object(o["createVNode"])(m,{id:"password",type:"password",modelValue:l.login_data.password,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.login_data.password=e})},null,8,["modelValue"])]),Object(o["createVNode"])(f,{label:"登入",onClick:Object(o["withModifiers"])(p.login,["prevent"])},null,8,["onClick"])])])}var p=n("bc3a"),m=n.n(p),f=n("852e"),h=n.n(f),v={data:function(){return{login_data:{email:"",password:""}}},inject:["emitter"],methods:{login:function(){var e=this,t="".concat("https://lemon-coffee.herokuapp.com","/users/sign_in");this.emitter.emit("loading",!0),m.a.post(t,{user:this.login_data}).then((function(t){var n=t.headers.authorization;h.a.set("lemonToken",n),e.emitter.emit("loading",!1),200===t.status&&(e.showSuccessToast("登入成功"),e.getCart(),history.back(),e.emitter.emit("changeUserNavbarIconBtn"))})).catch((function(t){e.emitter.emit("loading",!1),401===t.response.status&&e.showErrorToast("請重新登入")}))},getCart:function(){var e=this,t="".concat("https://lemon-coffee.herokuapp.com","/users/cart_items"),n={Authorization:h.a.get("lemonToken")};this.emitter.emit("loading",!0),m.a.get(t,{headers:n}).then((function(t){e.emitter.emit("loading",!1),200===t.status&&e.emitter.emit("changeCartBadgeCount",t.data.length)})).catch((function(t){e.emitter.emit("loading",!1),401===t.response.status&&(e.showErrorToast("請重新登入"),e.$router.push("/entrance/login"))}))},showErrorToast:function(e){this.$toast.add({severity:"error",summary:e,life:5e3})},showSuccessToast:function(e){this.$toast.add({severity:"success",summary:e,life:2e3})}},created:function(){this.emitter.emit("changeUserNavbarIconBtn")}},b=(n("8605"),n("6b0d")),g=n.n(b);const w=g()(v,[["render",l],["__scopeId","data-v-04441f2c"]]);t["default"]=w},"852e":function(e,t,n){(function(t,n){e.exports=n()})(0,(function(){"use strict";function e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)e[o]=n[o]}return e}var t={read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function n(t,o){function r(n,r,a){if("undefined"!==typeof document){a=e({},o,a),"number"===typeof a.expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),n=encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var c in a)a[c]&&(i+="; "+c,!0!==a[c]&&(i+="="+a[c].split(";")[0]));return document.cookie=n+"="+t.write(r,n)+i}}function a(e){if("undefined"!==typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],o={},r=0;r<n.length;r++){var a=n[r].split("="),i=a.slice(1).join("=");try{var c=decodeURIComponent(a[0]);if(o[c]=t.read(i,c),e===c)break}catch(s){}}return e?o[e]:o}}return Object.create({set:r,get:a,remove:function(t,n){r(t,"",e({},n,{expires:-1}))},withAttributes:function(t){return n(this.converter,e({},this.attributes,t))},withConverter:function(t){return n(e({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(o)},converter:{value:Object.freeze(t)}})}var o=n(t,{path:"/"});return o}))},8605:function(e,t,n){"use strict";n("f953")},f953:function(e,t,n){}}]);
//# sourceMappingURL=chunk-522fc75f.82e2c2a6.js.map