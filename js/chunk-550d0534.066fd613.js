(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-550d0534"],{"0cb2":function(e,t,r){var n=r("7b0b"),o=Math.floor,c="".replace,a=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,i=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,l,s,d){var p=r+e.length,u=l.length,f=i;return void 0!==s&&(s=n(s),f=a),c.call(d,f,(function(n,c){var a;switch(c.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(p);case"<":a=s[c.slice(1,-1)];break;default:var i=+c;if(0===i)return n;if(i>u){var d=o(i/10);return 0===d?n:d<=u?void 0===l[d-1]?c.charAt(1):l[d-1]+c.charAt(1):n}a=l[i-1]}return void 0===a?"":a}))}},"0e9a":function(e,t,r){"use strict";r("f019")},"107c":function(e,t,r){var n=r("d039"),o=r("da84"),c=o.RegExp;e.exports=n((function(){var e=c("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},"11fc":function(e,t,r){"use strict";r("e93c")},"14c3":function(e,t,r){var n=r("825a"),o=r("1626"),c=r("c6b6"),a=r("9263");e.exports=function(e,t){var r=e.exec;if(o(r)){var i=r.call(e,t);return null!==i&&n(i),i}if("RegExp"===c(e))return a.call(e,t);throw TypeError("RegExp#exec called on incompatible receiver")}},5319:function(e,t,r){"use strict";var n=r("d784"),o=r("d039"),c=r("825a"),a=r("1626"),i=r("5926"),l=r("50c4"),s=r("577e"),d=r("1d80"),p=r("8aa5"),u=r("dc4a"),f=r("0cb2"),h=r("14c3"),b=r("b622"),m=b("replace"),g=Math.max,O=Math.min,j=function(e){return void 0===e?e:String(e)},v=function(){return"$0"==="a".replace(/./,"$0")}(),x=function(){return!!/./[m]&&""===/./[m]("a","$0")}(),y=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}));n("replace",(function(e,t,r){var n=x?"$":"$0";return[function(e,r){var n=d(this),o=void 0==e?void 0:u(e,m);return o?o.call(e,n,r):t.call(s(n),e,r)},function(e,o){var d=c(this),u=s(e);if("string"===typeof o&&-1===o.indexOf(n)&&-1===o.indexOf("$<")){var b=r(t,d,u,o);if(b.done)return b.value}var m=a(o);m||(o=s(o));var v=d.global;if(v){var x=d.unicode;d.lastIndex=0}var y=[];while(1){var _=h(d,u);if(null===_)break;if(y.push(_),!v)break;var k=s(_[0]);""===k&&(d.lastIndex=p(u,l(d.lastIndex),x))}for(var E="",w=0,N=0;N<y.length;N++){_=y[N];for(var V=s(_[0]),S=g(O(i(_.index),u.length),0),T=[],C=1;C<_.length;C++)T.push(j(_[C]));var D=_.groups;if(m){var B=[V].concat(T,S,u);void 0!==D&&B.push(D);var I=s(o.apply(void 0,B))}else I=f(V,u,S,T,D,o);S>=w&&(E+=u.slice(w,S)+I,w=S+V.length)}return E+u.slice(w)}]}),!y||!v||x)},"6c22":function(e,t,r){},"6efc":function(e,t,r){"use strict";r("6c22")},"8aa5":function(e,t,r){"use strict";var n=r("6547").charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},9263:function(e,t,r){"use strict";var n=r("577e"),o=r("ad6d"),c=r("9f7f"),a=r("5692"),i=r("7c73"),l=r("69f3").get,s=r("fce3"),d=r("107c"),p=RegExp.prototype.exec,u=a("native-string-replace",String.prototype.replace),f=p,h=function(){var e=/a/,t=/b*/g;return p.call(e,"a"),p.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),b=c.UNSUPPORTED_Y||c.BROKEN_CARET,m=void 0!==/()??/.exec("")[1],g=h||m||b||s||d;g&&(f=function(e){var t,r,c,a,s,d,g,O=this,j=l(O),v=n(e),x=j.raw;if(x)return x.lastIndex=O.lastIndex,t=f.call(x,v),O.lastIndex=x.lastIndex,t;var y=j.groups,_=b&&O.sticky,k=o.call(O),E=O.source,w=0,N=v;if(_&&(k=k.replace("y",""),-1===k.indexOf("g")&&(k+="g"),N=v.slice(O.lastIndex),O.lastIndex>0&&(!O.multiline||O.multiline&&"\n"!==v.charAt(O.lastIndex-1))&&(E="(?: "+E+")",N=" "+N,w++),r=new RegExp("^(?:"+E+")",k)),m&&(r=new RegExp("^"+E+"$(?!\\s)",k)),h&&(c=O.lastIndex),a=p.call(_?r:O,N),_?a?(a.input=a.input.slice(w),a[0]=a[0].slice(w),a.index=O.lastIndex,O.lastIndex+=a[0].length):O.lastIndex=0:h&&a&&(O.lastIndex=O.global?a.index+a[0].length:c),m&&a&&a.length>1&&u.call(a[0],r,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(a[s]=void 0)})),a&&y)for(a.groups=d=i(null),s=0;s<y.length;s++)g=y[s],d[g[0]]=a[g[1]];return a}),e.exports=f},"99af":function(e,t,r){"use strict";var n=r("23e7"),o=r("d039"),c=r("e8b5"),a=r("861d"),i=r("7b0b"),l=r("07fa"),s=r("8418"),d=r("65f0"),p=r("1dde"),u=r("b622"),f=r("2d00"),h=u("isConcatSpreadable"),b=9007199254740991,m="Maximum allowed index exceeded",g=f>=51||!o((function(){var e=[];return e[h]=!1,e.concat()[0]!==e})),O=p("concat"),j=function(e){if(!a(e))return!1;var t=e[h];return void 0!==t?!!t:c(e)},v=!g||!O;n({target:"Array",proto:!0,forced:v},{concat:function(e){var t,r,n,o,c,a=i(this),p=d(a,0),u=0;for(t=-1,n=arguments.length;t<n;t++)if(c=-1===t?a:arguments[t],j(c)){if(o=l(c),u+o>b)throw TypeError(m);for(r=0;r<o;r++,u++)r in c&&s(p,u,c[r])}else{if(u>=b)throw TypeError(m);s(p,u++,c)}return p.length=u,p}})},"9f7f":function(e,t,r){var n=r("d039"),o=r("da84"),c=o.RegExp;t.UNSUPPORTED_Y=n((function(){var e=c("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=n((function(){var e=c("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},ac1f:function(e,t,r){"use strict";var n=r("23e7"),o=r("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},ad6d:function(e,t,r){"use strict";var n=r("825a");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},c798:function(e,t,r){"use strict";r.r(t);var n=r("7a23"),o={class:"p-text-center"},c={class:"p-input-icon-left"},a=Object(n["createElementVNode"])("i",{class:"pi pi-search"},null,-1);function i(e,t,r,i,l,s){var d=Object(n["resolveComponent"])("InputText"),p=Object(n["resolveComponent"])("Button"),u=Object(n["resolveComponent"])("Column"),f=Object(n["resolveComponent"])("DataTable"),h=Object(n["resolveComponent"])("SingleOrder");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])(f,{value:l.orders,paginator:!0,class:"p-datatable-customers",rows:5,dataKey:"id",rowHover:!0,filters:l.filters,"onUpdate:filters":t[2]||(t[2]=function(e){return l.filters=e}),loading:l.loading,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25,50],currentPageReportTemplate:"顯示第 {first} ~ {last} 筆 , 共 {totalRecords} 筆訂單",globalFilterFields:["id","created_at"],filterDisplay:"menu",responsiveLayout:"stack",breakpoint:"960px",stateStorage:"local",stateKey:"dt-state-demo-local",selection:l.orders.items,"onUpdate:selection":t[3]||(t[3]=function(e){return l.orders.items=e}),selectionMode:"single",onRowSelect:t[4]||(t[4]=function(e){return s.getTheOrder(l.orders.items.id)})},{header:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",o,[Object(n["createElementVNode"])("span",c,[a,Object(n["createVNode"])(d,{modelValue:l.filters["global"].value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return l.filters["global"].value=e}),placeholder:"Keyword Search"},null,8,["modelValue"])]),Object(n["createVNode"])(p,{type:"button",icon:"pi pi-filter-slash",label:"清空",class:"p-button-outlined",onClick:t[1]||(t[1]=function(e){return s.clearFilters()})})])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(u,{field:"id",header:"訂單編號",sortable:"",style:{"min-width":"6rem"}},{body:Object(n["withCtx"])((function(e){var t=e.data;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.id),1)]})),_:1}),Object(n["createVNode"])(u,{field:"created_at",header:"成立時間",sortable:"",style:{"min-width":"9rem"}},{body:Object(n["withCtx"])((function(e){var t=e.data;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.created_at),1)]})),_:1}),Object(n["createVNode"])(u,{field:"status",header:"訂單狀態",sortable:!0,style:{"min-width":"6rem"}},{body:Object(n["withCtx"])((function(e){var t=e.data;return[Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(s.orderStatusText(t.status)),1)]})),_:1}),Object(n["createVNode"])(u,{field:"payment_status",header:"付款狀態",sortable:"",style:{"min-width":"6rem"}},{body:Object(n["withCtx"])((function(e){var t=e.data;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(s.paymentStatusText(t.payment_status)),1)]})),_:1}),Object(n["createVNode"])(u,{field:"shipping_status",header:"物流狀態",sortable:"",style:{"min-width":"6rem"}},{body:Object(n["withCtx"])((function(e){var t=e.data;return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(s.shippingStatusText(t.shipping_status)),1)]})),_:1})]})),_:1},8,["value","filters","loading","selection"]),Object(n["createVNode"])(h,{order:l.order},null,8,["order"])],64)}var l=r("5530"),s=(r("d3b7"),r("159b"),r("ac1f"),r("5319"),r("99af"),r("0393")),d=r("bc3a"),p=r.n(d),u=r("852e"),f=r.n(u),h=(r("b0c0"),function(e){return Object(n["pushScopeId"])("data-v-3b2fe21e"),e=e(),Object(n["popScopeId"])(),e}),b={class:"p-mt-0"},m={class:"p-col-12 p-lg-5 p-pl-3"},g=h((function(){return Object(n["createElementVNode"])("br",null,null,-1)})),O=h((function(){return Object(n["createElementVNode"])("br",null,null,-1)})),j={class:"p-col-5 p-lg-3 p-pl-3"},v={class:"p-col-3 p-lg-1 p-p-0 p-my-3"},x={class:"p-col-3 p-lg-2 p-text-right subtotal-container"},y={class:"p-grid p-mx-0 p-my-2"},_={class:"p-col-12"},k={class:"p-grid p-jc-between p-text-right p-ai-center"},E=h((function(){return Object(n["createElementVNode"])("div",{class:"p-col-7 p-lg-9 p-pr-0"},"小計",-1)})),w={class:"p-col-5 p-lg-3"},N=h((function(){return Object(n["createElementVNode"])("div",{class:"p-col-7 p-lg-9 p-pr-0"},"運費",-1)})),V={class:"p-col-5 p-lg-3"},S=h((function(){return Object(n["createElementVNode"])("div",{class:"p-col-7 p-lg-9 p-text-bold checkout-price p-pr-0"}," 總付款金額 ",-1)})),T={class:"p-col-5 p-lg-3 p-text-bold checkout-price"},C=h((function(){return Object(n["createElementVNode"])("div",{class:"divider p-pl-3"},[Object(n["createElementVNode"])("h4",null,"收件人資料")],-1)})),D={class:"p-grid p-m-1 p-pl-2 divider p-pb-1 p-ai-center"},B=h((function(){return Object(n["createElementVNode"])("div",{class:"p-col-12 p-lg-fixed p-text-bold",style:{width:"100px"}}," 姓名 ",-1)})),I={class:"p-col-12 p-lg-10"},$=h((function(){return Object(n["createElementVNode"])("div",{class:"p-col-12 p-lg-fixed p-text-bold",style:{width:"100px"}}," 電話 ",-1)})),A={class:"p-col-12 p-lg-10"},R=h((function(){return Object(n["createElementVNode"])("div",{class:"p-col-12 p-lg-fixed p-text-bold",style:{width:"100px"}}," Email ",-1)})),P={class:"p-col-12 p-lg-10"},z=h((function(){return Object(n["createElementVNode"])("div",{class:"p-col-12 p-lg-fixed p-text-bold",style:{width:"100px"}}," 送貨方式 ",-1)})),M={class:"p-col-12 p-lg-10"},F={key:0,class:"p-col-12 p-lg-fixed p-text-bold",style:{width:"100px"}},L={key:1,class:"p-col-12 p-lg-10"},U=h((function(){return Object(n["createElementVNode"])("div",{class:"p-col-12 p-lg-fixed p-text-bold",style:{width:"100px"}}," 付款方式 ",-1)})),K={class:"p-col-12 p-lg-10"},q=h((function(){return Object(n["createElementVNode"])("div",{class:"p-col-12 p-lg-fixed p-text-bold",style:{width:"100px"}}," 備註 ",-1)})),J={class:"p-col-12 p-lg-10"},W={class:"p-grid p-m-1 p-pl-2 p-ai-center"},Y=h((function(){return Object(n["createElementVNode"])("div",{class:"p-col-12 p-lg-fixed p-text-bold",style:{width:"100px"}}," 付款狀態 ",-1)})),H={class:"p-col-12 p-lg-10 p-d-flex p-jc-start p-ai-center"},G={key:0,class:"success-color pi pi-check-circle p-ml-1"},Q=h((function(){return Object(n["createElementVNode"])("div",{class:"p-col-12 p-lg-fixed p-text-bold",style:{width:"100px"}}," 訂單狀態 ",-1)})),X=h((function(){return Object(n["createElementVNode"])("div",{class:"p-col-12 p-lg-fixed p-text-bold",style:{width:"100px"}}," 物流狀態 ",-1)})),Z={class:"p-d-flex p-jc-end"};function ee(e,t,r,o,c,a){var i=Object(n["resolveComponent"])("Button"),l=Object(n["resolveComponent"])("OrderStatus"),s=Object(n["resolveComponent"])("ShippingStatus"),d=Object(n["resolveComponent"])("Dialog");return Object(n["openBlock"])(),Object(n["createBlock"])(d,{header:"訂單編號 ".concat(r.order.id),visible:c.isOpen,"onUpdate:visible":t[0]||(t[0]=function(e){return c.isOpen=e}),breakpoints:{"960px":"100vw"},style:{width:"60%"}},{footer:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",Z,[Object(n["createVNode"])(i,{disabled:!c.oneOrder["may_cancel?"],onClick:Object(n["withModifiers"])(a.cancelTheOreder,["prevent"]),label:"取消訂單",icon:"pi pi-times",class:"p-button-danger p-ml-3"},null,8,["disabled","onClick"]),Object(n["createVNode"])(i,{onClick:Object(n["withModifiers"])(a.closeWindow,["prevent"]),label:"關閉視窗",class:"p-button-secondary p-button-text",autofocus:""},null,8,["onClick"])])]})),default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("h4",b,"成立時間 "+Object(n["toDisplayString"])(a.updateDateFormat(r.order.created_at)),1),(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(r.order.items,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",{key:e.id,class:"p-grid p-m-0 p-py-3 divider p-ai-center p-jc-between"},[Object(n["createElementVNode"])("div",m,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.name),1),g,Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(a.groundText(e.ground)),1),O]),Object(n["createElementVNode"])("div",j," $ "+Object(n["toDisplayString"])(e.unit_price)+" / "+Object(n["toDisplayString"])(a.typeText(e.package_type)),1),Object(n["createElementVNode"])("div",v,"數量 "+Object(n["toDisplayString"])(e.quantity),1),Object(n["createElementVNode"])("div",x,[Object(n["createElementVNode"])("div",null,"$ "+Object(n["toDisplayString"])(e.unit_price*e.quantity),1)])])})),128)),Object(n["createElementVNode"])("div",y,[Object(n["createElementVNode"])("div",_,[Object(n["createElementVNode"])("div",k,[E,Object(n["createElementVNode"])("div",w,"$"+Object(n["toDisplayString"])(a.caculateSubtotal(r.order)),1),N,Object(n["createElementVNode"])("div",V," $ "+Object(n["toDisplayString"])(r.order.shipping_info.shipping_fee),1),S,Object(n["createElementVNode"])("div",T," $"+Object(n["toDisplayString"])(a.caculateSubtotal(r.order)+r.order.shipping_info.shipping_fee),1)])])]),C,Object(n["createElementVNode"])("div",D,[B,Object(n["createElementVNode"])("div",I,Object(n["toDisplayString"])(r.order.shipping_info.name),1),$,Object(n["createElementVNode"])("div",A,Object(n["toDisplayString"])(r.order.shipping_info.phone_number),1),R,Object(n["createElementVNode"])("div",P,Object(n["toDisplayString"])(r.order.shipping_info.email),1),z,Object(n["createElementVNode"])("div",M,Object(n["toDisplayString"])(a.shippingMethodText),1),a.homeDelivery?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",F," 收件地址 ")):Object(n["createCommentVNode"])("",!0),a.homeDelivery?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",L,Object(n["toDisplayString"])(r.order.shipping_info.address),1)):Object(n["createCommentVNode"])("",!0),U,Object(n["createElementVNode"])("div",K,Object(n["toDisplayString"])(a.paymentMethodText),1),q,Object(n["createElementVNode"])("div",J,Object(n["toDisplayString"])(r.order.note),1)]),Object(n["createElementVNode"])("div",W,[Y,Object(n["createElementVNode"])("div",H,[Object(n["createElementVNode"])("strong",{class:Object(n["normalizeClass"])([a.paymentStatusColor,"p-mr-4"])},[Object(n["createTextVNode"])(Object(n["toDisplayString"])(a.paymentStatusText)+" ",1),a.paid?(Object(n["openBlock"])(),Object(n["createElementBlock"])("i",G)):Object(n["createCommentVNode"])("",!0)],2),c.oneOrder["may_pay?"]&&!a.canceled?(Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:0,onClick:a.confirm_paid,label:"確認付款",class:"p-button-raised p-button-info p-button-sm p-lg-fixed p-col-3 p-px-2",style:{width:"100px"}},null,8,["onClick"])):Object(n["createCommentVNode"])("",!0)]),Q,Object(n["createVNode"])(l,{orderData:c.oneOrder},null,8,["orderData"]),X,Object(n["createVNode"])(s,{orderData:c.oneOrder},null,8,["orderData"])])]})),_:1},8,["header","visible"])}var te=function(e){return Object(n["pushScopeId"])("data-v-4bb5d414"),e=e(),Object(n["popScopeId"])(),e},re={key:0,class:"p-col-12 p-lg-10 p-d-flex p-jc-start p-ai-center"},ne=te((function(){return Object(n["createElementVNode"])("strong",{class:"cancel-color"}," 已取消 ",-1)})),oe=[ne],ce={key:1,class:"p-col-12 p-lg-10 p-d-flex p-jc-start p-ai-center"},ae=te((function(){return Object(n["createElementVNode"])("strong",{class:"progress-color"}," 備貨中 ",-1)})),ie=te((function(){return Object(n["createElementVNode"])("i",{class:"pi pi-arrow-right p-mx-1"},null,-1)})),le={key:1,class:"progress-color"},se={key:6,class:"pi pi-check-circle success-color p-ml-1"};function de(e,t,r,o,c,a){var i=Object(n["resolveComponent"])("Button");return a.canceled?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",re,oe)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ce,[ae,ie,c.the_order["may_to_shipping?"]?(Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:0,onClick:a.confirm_shipped,label:"確認發貨",class:"p-button-raised p-button-info p-button-sm p-lg-fixed p-col-2 p-px-2",style:{width:"100px"}},null,8,["onClick"])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("strong",le," 已發貨 ")),Object(n["createElementVNode"])("i",{class:Object(n["normalizeClass"])(["pi pi-arrow-right p-mx-1",a.shipping_arrow_style])},null,2),c.the_order["may_to_arrived?"]?(Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:2,onClick:a.confirm_arrived,label:"確認到達",class:"p-button-raised p-button-info p-button-sm p-lg-fixed p-col-2 p-px-2",style:{width:"100px"}},null,8,["onClick"])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("strong",{key:3,class:Object(n["normalizeClass"])(a.arrived_style)}," 已到達 ",2)),Object(n["createElementVNode"])("i",{class:Object(n["normalizeClass"])(["pi pi-arrow-right p-mx-1",a.arrived_arrow_style])},null,2),c.the_order["may_to_picked_up?"]?(Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:4,onClick:a.confirm_picked_up,label:"確認取貨",class:"p-button-raised p-button-info p-button-sm p-lg-fixed p-col-3 p-px-2",style:{width:"100px"}},null,8,["onClick"])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("strong",{key:5,class:Object(n["normalizeClass"])(a.picked_up_style)}," 已取貨 ",2)),a.picked_up?(Object(n["openBlock"])(),Object(n["createElementBlock"])("i",se)):Object(n["createCommentVNode"])("",!0)]))}var pe={data:function(){return{the_order:{}}},props:{orderData:{type:Object,default:function(){}}},inject:["emitter"],methods:{confirm_shipped:function(){var e=this,t="".concat("https://lemon-coffee.herokuapp.com","/admin/orders/").concat(this.the_order.id,"/shipping_status"),r={Authorization:f.a.get("lemonToken")},n={shipping_status:"shipping"};p.a.put(t,n,{headers:r}).then((function(t){e.the_order=t.data,e.emitter.emit("updateOrderAllStatus"),e.emitter.emit("updateCancelBtnStatus",e.the_order.id)})).catch((function(t){401===t.response.status&&(f.a.remove("lemonToken"),e.showErrorToast("請重新登入"),e.$router.push("/entrance/login"))})).finally((function(){e.loading=!1}))},confirm_arrived:function(){var e=this,t="".concat("https://lemon-coffee.herokuapp.com","/admin/orders/").concat(this.the_order.id,"/shipping_status"),r={Authorization:f.a.get("lemonToken")},n={shipping_status:"arrived"};p.a.put(t,n,{headers:r}).then((function(t){e.the_order=t.data,e.emitter.emit("updateOrderAllStatus")})).catch((function(t){401===t.response.status&&(f.a.remove("lemonToken"),e.showErrorToast("請重新登入"),e.$router.push("/entrance/login"))})).finally((function(){e.loading=!1}))},confirm_picked_up:function(){var e=this,t="".concat("https://lemon-coffee.herokuapp.com","/admin/orders/").concat(this.the_order.id,"/shipping_status"),r={Authorization:f.a.get("lemonToken")},n={shipping_status:"picked_up"};p.a.put(t,n,{headers:r}).then((function(t){e.the_order=t.data,e.emitter.emit("updateOrderAllStatus")})).catch((function(t){401===t.response.status&&(f.a.remove("lemonToken"),e.showErrorToast("請重新登入"),e.$router.push("/entrance/login"))})).finally((function(){e.loading=!1}))}},computed:{shipping:function(){return"shipping"===this.the_order.shipping_status},arrived:function(){return"arrived"===this.the_order.shipping_status},picked_up:function(){return"picked_up"===this.the_order.shipping_status},arrived_style:function(){return this.arrived||this.picked_up?"progress-color":"disabled-color"},shipping_arrow_style:function(){return this.shipping||this.arrived||this.picked_up?"arrow-color":"disabled-color"},arrived_arrow_style:function(){return this.arrived||this.picked_up?"arrow-color":"disabled-color"},picked_up_style:function(){return this.picked_up?"success-color":"disabled-color"},canceled:function(){return"canceled"===this.the_order.status}},watch:{orderData:function(){this.the_order=Object(l["a"])({},this.orderData)}},mounted:function(){this.the_order=Object(l["a"])({},this.orderData)}},ue=(r("0e9a"),r("6b0d")),fe=r.n(ue);const he=fe()(pe,[["render",de],["__scopeId","data-v-4bb5d414"]]);var be=he,me=function(e){return Object(n["pushScopeId"])("data-v-60d73e17"),e=e(),Object(n["popScopeId"])(),e},ge={key:0,class:"p-col-12 p-lg-10 p-d-flex p-jc-start p-ai-center"},Oe=me((function(){return Object(n["createElementVNode"])("strong",{class:"cancel-color"}," 已取消 ",-1)})),je=[Oe],ve={key:1,class:"p-col-12 p-lg-10 p-d-flex p-jc-start p-ai-center"},xe=me((function(){return Object(n["createElementVNode"])("strong",{class:"progress-color"}," 處理中 ",-1)})),ye=me((function(){return Object(n["createElementVNode"])("i",{class:"pi pi-arrow-right p-mx-1"},null,-1)})),_e={key:1,class:"progress-color"},ke={key:2,class:"pi pi-check-circle p-ml-1 success-color"};function Ee(e,t,r,o,c,a){var i=Object(n["resolveComponent"])("Button");return a.canceled?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ge,je)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",ve,[xe,ye,c.the_order["may_confirm?"]?(Object(n["openBlock"])(),Object(n["createBlock"])(i,{key:0,onClick:Object(n["withModifiers"])(a.confirm_order,["prevent"]),label:"確認訂單",class:"p-button-raised p-button-info p-button-sm p-lg-fixed p-col-3 p-px-2",style:{width:"100px"}},null,8,["onClick"])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("strong",_e," 已確認 ")),Object(n["createElementVNode"])("i",{class:Object(n["normalizeClass"])([a.finished_arrow_style,"pi pi-arrow-right p-mx-1"])},null,2),Object(n["createElementVNode"])("strong",{class:Object(n["normalizeClass"])(a.finished_text_style)},"已完成",2),a.finished?(Object(n["openBlock"])(),Object(n["createElementBlock"])("i",ke)):Object(n["createCommentVNode"])("",!0)]))}var we={data:function(){return{the_order:{}}},props:{orderData:{typeof:Object}},inject:["emitter"],methods:{confirm_order:function(){var e=this,t="".concat("https://lemon-coffee.herokuapp.com","/admin/orders/").concat(this.the_order.id,"/status"),r={Authorization:f.a.get("lemonToken")},n={status:"confirmed"};p.a.put(t,n,{headers:r}).then((function(t){e.the_order=t.data,e.emitter.emit("updateOrderAllStatus")})).catch((function(t){401===t.response.status&&(f.a.remove("lemonToken"),e.showErrorToast("請重新登入"),e.$router.push("/entrance/login"))})).finally((function(){e.loading=!1}))}},computed:{finished_arrow_style:function(){return this.finished?"arrow-color":"disabled-color"},finished_text_style:function(){return this.finished?"success-color":"disabled-color"},finished:function(){return"finished"===this.the_order.status},canceled:function(){return"canceled"===this.the_order.status}},watch:{orderData:function(){this.the_order=Object(l["a"])({},this.orderData)}},mounted:function(){this.the_order=Object(l["a"])({},this.orderData)}};r("11fc");const Ne=fe()(we,[["render",Ee],["__scopeId","data-v-60d73e17"]]);var Ve=Ne,Se={data:function(){return{isOpen:!1,oneOrder:{}}},components:{ShippingStatus:be,OrderStatus:Ve},props:{order:{type:Object,default:function(){return{}}}},watch:{order:function(){this.oneOrder=Object(l["a"])({},this.order),this.isOpen=!0}},methods:{updateDateFormat:function(e){var t=new Date(Date.parse(e)).toLocaleString(),r=t.replace("/","-").replace("/","-");return r},groundText:function(e){return!0===e?"磨粉":"原豆"},confirm_paid:function(){var e=this,t="".concat("https://lemon-coffee.herokuapp.com","/admin/orders/").concat(this.oneOrder.id,"/payment_status"),r={Authorization:f.a.get("lemonToken")},n={payment_status:"paid"};p.a.put(t,n,{headers:r}).then((function(t){e.oneOrder=t.data,e.emitter.emit("updateOrderAllStatus")})).catch((function(t){401===t.response.status&&(f.a.remove("lemonToken"),e.showErrorToast("請重新登入"),e.$router.push("/entrance/login"))})).finally((function(){e.loading=!1}))},caculateSubtotal:function(e){return e.items.reduce((function(e,t){return e+t.unit_price*t.quantity}),0)},typeText:function(e){switch(e){case"drip_bag":return"耳掛";case"half_pound":return"半磅";case"one_pound":return"一磅"}},closeWindow:function(){this.isOpen=!1},cancelTheOreder:function(){var e=this,t="".concat("https://lemon-coffee.herokuapp.com","/admin/orders/").concat(this.oneOrder.id,"/status"),r={Authorization:f.a.get("lemonToken")},n={status:"canceled"};p.a.put(t,n,{headers:r}).then((function(t){e.oneOrder=t.data,e.emitter.emit("updateOrderAllStatus")})).catch((function(t){401===t.response.status&&(f.a.remove("lemonToken"),e.showErrorToast("請重新登入"),e.$router.push("/entrance/login"))})).finally((function(){e.loading=!1}))}},inject:["emitter"],computed:{homeDelivery:function(){return"home_delivery"===this.oneOrder.shipping_info.shipping_method},paymentMethodText:function(){return"cash_on_delivery"===this.oneOrder.payment_method?"貨到付款":""},shippingMethodText:function(){return this.homeDelivery?"宅配":""},paymentStatusText:function(){return this.outstanding?"未付款":this.paid?"已付款":"付款失敗"},paymentStatusColor:function(){return this.paid?"success-color":"blue-color"},outstanding:function(){return"outstanding"===this.oneOrder.payment_status},paid:function(){return"paid"===this.oneOrder.payment_status},pending:function(){return"pending"===this.oneOrder.status},confirmed:function(){return"confirmed"===this.oneOrder.status},canceled:function(){return"canceled"===this.oneOrder.status},inPreparation:function(){return"in_preparation"===this.oneOrder.shipping_status}}};r("6efc");const Te=fe()(Se,[["render",ee],["__scopeId","data-v-3b2fe21e"]]);var Ce=Te,De={data:function(){return{filters:{global:{value:null,matchMode:s["a"].CONTAINS}},orders:[],order:{},loading:!0}},components:{SingleOrder:Ce},inject:["emitter"],methods:{getOrders:function(){var e=this,t="".concat("https://lemon-coffee.herokuapp.com","/admin/orders"),r={Authorization:f.a.get("lemonToken")};p.a.get(t,{headers:r}).then((function(t){e.orders=t.data,e.updateDateFormat()})).catch((function(t){401===t.response.status&&(f.a.remove("lemonToken"),e.showErrorToast("請重新登入"),e.$router.push("/entrance/login"))})).finally((function(){e.loading=!1}))},updateDateFormat:function(){this.orders.forEach((function(e){var t=new Date(Date.parse(e.created_at)).toLocaleString(),r=t.replace("/","-").replace("/","-");e.created_at=r}))},showErrorToast:function(e){this.$toast.add({severity:"error",summary:e,life:5e3})},clearFilters:function(){this.initFilters()},initFilters:function(){this.filters={global:{value:null,matchMode:s["a"].CONTAINS}}},orderStatusText:function(e){switch(e){case"pending":return"處理中";case"confirmed":return"已確認";case"finished":return"已完成";case"canceled":return"已取消"}},paymentStatusText:function(e){switch(e){case"outstanding":return"未付款";case"failed":return"付款失敗";case"paid":return"已付款"}},shippingStatusText:function(e){switch(e){case"in_preparation":return"備貨中";case"shipping":return"已發貨";case"arrived":return"已到達";case"picked_up":return"已取貨"}},getTheOrder:function(e){var t=this,r="".concat("https://lemon-coffee.herokuapp.com","/admin/orders/").concat(e),n={Authorization:f.a.get("lemonToken")};p.a.get(r,{headers:n}).then((function(e){t.order=Object(l["a"])({},e.data)})).catch((function(e){401===e.response.status&&(f.a.remove("lemonToken"),t.showErrorToast("請重新登入"),t.$router.push("/entrance/login"))})).finally((function(){t.loading=!1}))}},created:function(){var e=this;this.getOrders(),this.emitter.on("updateOrderAllStatus",(function(){e.getOrders()})),this.emitter.on("updateCancelBtnStatus",(function(t){e.getTheOrder(t)}))}};const Be=fe()(De,[["render",i]]);t["default"]=Be},d784:function(e,t,r){"use strict";r("ac1f");var n=r("6eeb"),o=r("9263"),c=r("d039"),a=r("b622"),i=r("9112"),l=a("species"),s=RegExp.prototype;e.exports=function(e,t,r,d){var p=a(e),u=!c((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),f=u&&!c((function(){var t=!1,r=/a/;return"split"===e&&(r={},r.constructor={},r.constructor[l]=function(){return r},r.flags="",r[p]=/./[p]),r.exec=function(){return t=!0,null},r[p](""),!t}));if(!u||!f||r){var h=/./[p],b=t(p,""[e],(function(e,t,r,n,c){var a=t.exec;return a===o||a===s.exec?u&&!c?{done:!0,value:h.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}));n(String.prototype,e,b[0]),n(s,p,b[1])}d&&i(s[p],"sham",!0)}},e93c:function(e,t,r){},f019:function(e,t,r){},fce3:function(e,t,r){var n=r("d039"),o=r("da84"),c=o.RegExp;e.exports=n((function(){var e=c(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))}}]);
//# sourceMappingURL=chunk-550d0534.066fd613.js.map