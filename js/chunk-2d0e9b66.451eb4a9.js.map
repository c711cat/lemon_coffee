{"version":3,"sources":["webpack:///./src/views/Manager/AddProduct.vue","webpack:///./src/views/Manager/AddProduct.vue?e1a3"],"names":["isLoading","onSubmit","addProduct","data","product","components","ProductForm","Loading","methods","addItem","this","api","headers","Authorization","get","a","post","then","response","status","showSuccessToast","$router","push","catch","error","remove","showErrorToast","name","roast","finally","text","$toast","add","severity","summary","life","__exports__","render"],"mappings":"sQACiB,EAAAA,W,yBAAf,yBAA4B,a,yBAC5B,yBAAyD,G,MAApCC,SAAU,EAAAC,Y,8HASlB,GACbC,KADa,WAEX,MAAO,CACLC,QAAS,GACTJ,WAAW,IAIfK,WAAY,CAAEC,cAAA,KAAaC,UAAA,MAE3BC,QAAS,CACPN,WADO,SACIO,GAAS,WAClBC,KAAKN,QAAL,kBAAoBK,GACpB,IAAME,EAAE,UAAO,qCAAP,mBACFC,EAAU,CAAEC,cAAe,IAAQC,IAAI,eAC7CJ,KAAKV,WAAY,EACjB,EAAAe,EACGC,KAAKL,EAAKD,KAAKN,QAAS,CAAEQ,YAC1BK,MAAK,SAACC,GACmB,MAApBA,EAASC,SACX,EAAKC,iBAAiB,QACtB,EAAKC,QAAQC,KAAK,cAGrBC,OAAM,SAACC,GACwB,MAA1BA,EAAMN,SAASC,SACjB,IAAQM,OAAO,cACf,EAAKC,eAAe,SACpB,EAAKL,QAAQC,KAAK,oBAEhBE,EAAMN,SAASf,KAAKwB,MACtB,EAAKD,eAAe,YAElBF,EAAMN,SAASf,KAAKyB,OACtB,EAAKF,eAAe,cAGvBG,SAAQ,WACP,EAAK7B,WAAY,MAGvB0B,eA/BO,SA+BQI,GACbpB,KAAKqB,OAAOC,IAAI,CACdC,SAAU,QACVC,QAASJ,EACTK,KAAM,OAGVf,iBAtCO,SAsCUU,GACfpB,KAAKqB,OAAOC,IAAI,CACdC,SAAU,UACVC,QAASJ,EACTK,KAAM,S,qBC1Dd,MAAMC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD","file":"js/chunk-2d0e9b66.451eb4a9.js","sourcesContent":["<template>\n  <Loading v-if=\"isLoading\" />\n  <ProductForm v-else :onSubmit=\"addProduct\"></ProductForm>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport ProductForm from \"@/components/ProductForm.vue\";\nimport Cookies from \"js-cookie\";\nimport Loading from \"@/components/Loading.vue\";\n\nexport default {\n  data() {\n    return {\n      product: {},\n      isLoading: false,\n    };\n  },\n\n  components: { ProductForm, Loading },\n\n  methods: {\n    addProduct(addItem) {\n      this.product = { ...addItem };\n      const api = `${process.env.VUE_APP_API}/admin/products`;\n      const headers = { Authorization: Cookies.get(\"lemonToken\") };\n      this.isLoading = true;\n      axios\n        .post(api, this.product, { headers })\n        .then((response) => {\n          if (response.status === 200) {\n            this.showSuccessToast(\"新增成功\");\n            this.$router.push(\"/admin\");\n          }\n        })\n        .catch((error) => {\n          if (error.response.status === 401) {\n            Cookies.remove(\"lemonToken\");\n            this.showErrorToast(\"請重新登入\");\n            this.$router.push(\"/entrance/login\");\n          }\n          if (error.response.data.name) {\n            this.showErrorToast(\"產品名稱不可空白\");\n          }\n          if (error.response.data.roast) {\n            this.showErrorToast(\"烘焙度不可空白\");\n          }\n        })\n        .finally(() => {\n          this.isLoading = false;\n        });\n    },\n    showErrorToast(text) {\n      this.$toast.add({\n        severity: \"error\",\n        summary: text,\n        life: 5000,\n      });\n    },\n    showSuccessToast(text) {\n      this.$toast.add({\n        severity: \"success\",\n        summary: text,\n        life: 2000,\n      });\n    },\n  },\n};\n</script>\n","import { render } from \"./AddProduct.vue?vue&type=template&id=95031c0e\"\nimport script from \"./AddProduct.vue?vue&type=script&lang=js\"\nexport * from \"./AddProduct.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\homework\\\\practice\\\\lemon_coffee\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}